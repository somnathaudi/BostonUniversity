{"link_serial":146,"update_time":"2017-12-08T16:31:33.231000+00:00","phase_snode_id":null,"scrub_version":"48f99abcdf450e7c49a04015355fb699f785e8cbf8288d894686a64c6caeddd1","instance_id":"f5d7ac84-b4a5-4287-b8c1-c5c06565a926","update_user_id":"tsemd@bu.edu","class_fqid":"com-snaplogic-pipeline_8","partition_snode_id":"591ef091f952e90e31864074","path_id":"/BUDev/BUIntegration/ErrorHandling","create_time":"2017-06-08T15:56:35.141000+00:00","snode_id":"593973b3e8ac6e5efd65d5d7","snap_map":{"860b8ecc-9c49-4e91-8c77-93167bf2f167":{"instance_id":"860b8ecc-9c49-4e91-8c77-93167bf2f167","class_id":"com-snaplogic-snaps-rest-get","class_build_tag":"snapsmrc405","class_fqid":"com-snaplogic-snaps-rest-get_2-snapsmrc405","instance_version":2,"property_map":{"info":{"notes":{"value":null},"label":{"value":"REST GET Monitoring Data from Last Hour"}},"view_serial":100,"account":{"account_ref":{"expression":false,"value":{"ref_id":{"expression":false,"value":"0dce1eb1-7bfa-41a3-9676-b6cd1f7a36b0"},"ref_class_id":{"value":"com-snaplogic-snaps-rest-restbasicauthaccount"},"label":{"expression":false,"value":"Snap API Rest Authorization"}}}},"settings":{"retryInterval":{"value":3},"trustAllCerts":{"value":true},"retry":{"value":5},"hasNext":{"expression":true,"value":"($entity.response_map.offset + $entity.response_map.limit) <  $entity.response_map.total"},"serviceUrl":{"expression":true,"value":"'https://elastic.snaplogic.com/api/1/rest/public/runtime/' + pipe.projectPath.substring(1,pipe.projectPath.indexOf('/',1))"},"processArray":{"value":false},"nextUrl":{"expression":true,"value":"'https://elastic.snaplogic.com/api/1/rest/public/runtime/' + pipe.projectPath.substring(1,pipe.projectPath.indexOf('/',1)) + '?last_hours=10&state=Failed&offset=' + ($entity.response_map.offset+$entity.response_map.limit)"},"showAllHeaders":{"value":false},"paginationInterval":{"value":0},"executeDuringPreview":{"value":true},"header":{"value":[]},"responseEntityType":{"value":"DEFAULT"},"followRedirects":{"value":true},"timeout":{"value":900},"queryParams":{"value":[{"queryParamValue":{"expression":true,"value":"'Failed'"},"queryParam":{"value":"state"}},{"queryParamValue":{"expression":true,"value":"10"},"queryParam":{"value":"last_hours"}}]},"rawData":{"value":false}},"error":{"error0":{"label":{"value":"error0"},"view_type":{"value":"document"}},"error_behavior":{"value":"fail"}},"output":{"output0":{"label":{"value":"output0"},"view_type":{"value":"document"}}}},"class_version":2,"instance_fqid":"860b8ecc-9c49-4e91-8c77-93167bf2f167_2"},"1b91bb3e-ec3a-4138-9c34-0b8158e1ba39":{"instance_id":"1b91bb3e-ec3a-4138-9c34-0b8158e1ba39","class_id":"com-snaplogic-snaps-transform-datatransform","class_build_tag":"snapsmrc405","class_fqid":"com-snaplogic-snaps-transform-datatransform_4-snapsmrc405","instance_version":1,"property_map":{"info":{"notes":{"value":null},"label":{"value":"Map Log Data to Document Disposition Columns"}},"view_serial":100,"input":{"input0":{"label":{"value":"input0"},"view_type":{"value":"document"}}},"settings":{"nullSafeAccess":{"value":true},"passThrough":{"value":false},"transformations":{"value":{"mappingTable":{"value":[{"targetPath":{"value":"$create_time"},"expression":{"expression":true,"value":"$original.create_time"}},{"targetPath":{"value":"$documents"},"expression":{"expression":true,"value":"$original.documents"}},{"targetPath":{"value":"$id"},"expression":{"expression":true,"value":"$original.id"}},{"targetPath":{"value":"$label"},"expression":{"expression":true,"value":"$original.label"}},{"targetPath":{"value":"$pipe_id"},"expression":{"expression":true,"value":"$original.pipe_id"}},{"targetPath":{"value":"$runtime_label"},"expression":{"expression":true,"value":"$original.runtime_label"}},{"targetPath":{"value":"$error_msg"},"expression":{"expression":true,"value":"jsonPath($, \"$entity.response_map.entries[*]._source.msg\").shift()"}}]},"mappingRoot":{"value":"$"}}}},"error":{"error0":{"label":{"value":"error0"},"view_type":{"value":"document"}},"error_behavior":{"value":"fail"}},"output":{"output0":{"label":{"value":"output0"},"view_type":{"value":"document"}}}},"class_version":4,"instance_fqid":"1b91bb3e-ec3a-4138-9c34-0b8158e1ba39_1"},"619930e1-1348-47ef-958e-63c1e6db86e6":{"instance_version":4,"class_id":"com-snaplogic-snaps-email-emailsender","class_build_tag":"snapsmrc405","class_fqid":"com-snaplogic-snaps-email-emailsender_2-snapsmrc405","instance_id":"619930e1-1348-47ef-958e-63c1e6db86e6","property_map":{"info":{"notes":{"value":null},"label":{"value":"Send email alert"}},"view_serial":101,"account":{"account_ref":{"expression":false,"value":{"ref_id":{"expression":false,"value":"082a0eca-1014-4122-adb4-d0617a917fc9"},"ref_class_id":{"value":"com-snaplogic-snaps-email-smtpaccount"},"label":{"expression":false,"value":"Email Notification Account"}}}},"settings":{"body":{"expression":false,"value":"<!DOCTYPE html> \n<html> \n<head> \n<title>Email Snap HTML Table</title> \n<style type=\"text/css\"> table.Snap {background-color:transparent;border-collapse:collapse;width:100%;} table.Snap th, table.Snap td {text-align:center;border:1px solid black;padding:5px;} table.Snap th {background-color:AntiqueWhite;} </style> \n</head> \n<body> \n<p>Below is a summary of the failed snap(s)\n\n</p> \n<table class=\"Snap\"> </table> \n<p></p> \n<p>\nPlease log onto the  snapLogic Dashboard for further information</p> \n</body> \n</html>"},"retries":{"value":3},"from":{"expression":false,"value":"monitoring@snaplogic.budev.com"},"attachments":{"value":[{"url":{"expression":false,"value":null}}]},"cc":{"expression":false,"value":"somnatha@bu.edu, minhan@bu.edu, sdelano@bu.edu, tsemd@bu.edu"},"emailType":{"value":"HTML table"},"batchSize":{"value":100},"executable_during_suggest":{"value":false},"bcc":{"expression":false,"value":null},"to":{"expression":false,"value":"jskrable@bu.edu"},"tableDataPath":{"value":"$"},"passThrough":{"value":false},"subject":{"expression":true,"value":"'ERROR - Pipeline failure'"}},"error":{"error0":{"label":{"value":"error0"},"view_type":{"value":"document"}},"error_behavior":{"value":"fail"}},"input":{"input101":{"view_type":{"value":"document"},"label":{"value":"input0"}}}},"class_version":2,"instance_fqid":"619930e1-1348-47ef-958e-63c1e6db86e6_4"},"81c741fa-819f-4dd8-b4e1-5a9a202fcdb6":{"instance_version":1,"class_id":"com-snaplogic-snaps-flow-datavalidator","class_build_tag":"snapsmrc405","class_fqid":"com-snaplogic-snaps-flow-datavalidator_1-snapsmrc405","instance_id":"81c741fa-819f-4dd8-b4e1-5a9a202fcdb6","property_map":{"info":{"notes":{"value":null},"label":{"value":"Ensure there is a failure to send"}},"view_serial":100,"input":{"input0":{"label":{"value":"input0"},"view_type":{"value":"document"}}},"settings":{"constraintMappings":{"value":[{"sourcePath":{"value":"$entity.response_map.total"},"constraintValue":{"value":"1"},"constraint":{"value":"Minimum"}}]}},"error":{"error0":{"label":{"value":"error0"},"view_type":{"value":"document"}},"error_behavior":{"value":"continue"}},"output":{"output0":{"label":{"value":"output0"},"view_type":{"value":"document"}}}},"class_version":1,"instance_fqid":"81c741fa-819f-4dd8-b4e1-5a9a202fcdb6_1"},"83df914a-7a82-4134-bcf3-80f9eb6ccdbb":{"instance_version":4,"class_id":"com-snaplogic-snaps-flow-filter","class_build_tag":"snapsmrc405","class_fqid":"com-snaplogic-snaps-flow-filter_2-snapsmrc405","instance_id":"83df914a-7a82-4134-bcf3-80f9eb6ccdbb","property_map":{"info":{"notes":{"value":null},"label":{"value":"Filter out records older than 5 minutes"}},"view_serial":100,"input":{"input0":{"view_type":{"value":"document"},"label":{"value":"input0"}}},"settings":{"filterExpression":{"expression":true,"value":"Date.now() - Date.parse($create_time) <= (1000 * 60 * 60)"}},"error":{"error0":{"view_type":{"value":"document"},"label":{"value":"error0"}},"error_behavior":{"value":"fail"}},"output":{"output0":{"view_type":{"value":"document"},"label":{"value":"output0"}}}},"class_version":2,"instance_fqid":"83df914a-7a82-4134-bcf3-80f9eb6ccdbb_4"},"755dd4a2-94d3-4c58-93ef-71c7b18eb11c":{"instance_id":"755dd4a2-94d3-4c58-93ef-71c7b18eb11c","class_id":"com-snaplogic-snaps-transform-jsonsplitter","class_build_tag":"snapsmrc405","class_fqid":"com-snaplogic-snaps-transform-jsonsplitter_1-snapsmrc405","instance_version":1,"property_map":{"info":{"notes":{"value":null},"label":{"value":"JSON Filter Extraneous Data"}},"view_serial":100,"input":{"input0":{"label":{"value":"input0"},"view_type":{"value":"document"}}},"settings":{"nullSafeAccess":{"value":false},"includeParents":{"value":false},"includePaths":{"value":[]},"path":{"value":"$entity.response_map.entries"}},"error":{"error0":{"label":{"value":"error0"},"view_type":{"value":"document"}},"error_behavior":{"value":"fail"}},"output":{"output0":{"label":{"value":"output0"},"view_type":{"value":"document"}}}},"class_version":1,"instance_fqid":"755dd4a2-94d3-4c58-93ef-71c7b18eb11c_1"},"6d08ef82-fb88-4f9e-8e94-aaded37d2c0c":{"instance_id":"6d08ef82-fb88-4f9e-8e94-aaded37d2c0c","class_id":"com-snaplogic-snaps-rest-get","class_build_tag":"snapsmrc405","class_fqid":"com-snaplogic-snaps-rest-get_2-snapsmrc405","instance_version":2,"property_map":{"info":{"notes":{"value":null},"label":{"value":"REST GET Log Data"}},"view_serial":101,"account":{"account_ref":{"expression":false,"value":{"label":{"expression":false,"value":"Snap API Rest Authorization"},"ref_class_id":{"value":"com-snaplogic-snaps-rest-restbasicauthaccount"},"ref_id":{"expression":false,"value":"0dce1eb1-7bfa-41a3-9676-b6cd1f7a36b0"}}}},"settings":{"retryInterval":{"value":3},"trustAllCerts":{"value":false},"retry":{"value":5},"hasNext":{"expression":true,"value":null},"serviceUrl":{"expression":true,"value":"'https://elastic.snaplogic.com/api/1/rest/public/log/' + pipe.projectPath.substring(1,pipe.projectPath.indexOf('/',1)) + '?'"},"processArray":{"value":false},"nextUrl":{"expression":true,"value":null},"showAllHeaders":{"value":false},"paginationInterval":{"value":0},"executeDuringPreview":{"value":true},"header":{"value":[]},"responseEntityType":{"value":"DEFAULT"},"followRedirects":{"value":true},"timeout":{"value":900},"queryParams":{"value":[{"queryParamValue":{"expression":true,"value":"$id"},"queryParam":{"value":"ruuid"}},{"queryParamValue":{"expression":true,"value":"'Error'"},"queryParam":{"value":"log_level"}}]},"rawData":{"value":false}},"output":{"output101":{"view_type":{"value":"document"},"label":{"value":"output0"}}},"error":{"error0":{"label":{"value":"error0"},"view_type":{"value":"document"}},"error_behavior":{"value":"fail"}},"input":{"input0":{"label":{"value":"input0"},"view_type":{"value":"document"}}}},"class_version":2,"instance_fqid":"6d08ef82-fb88-4f9e-8e94-aaded37d2c0c_2"}},"org_snode_id":"58c70e0ea87b6d76b3470f3e","path":"/BUDev/BUIntegration/ErrorHandling/sendErrorNotification","instance_version":10,"migrate_version":"master-2517","scrub_backup":[],"create_user_id":"jskrable@bu.edu","project_snode_id":"591f5f7244ecb43a73878c84","property_map":{"info":{"notes":{"value":null},"author":{"value":"jskrable@bu.edu"},"purpose":{"value":null},"pipeline_doc_uri":{"value":null},"label":{"value":"sendErrorNotification"}},"input":{},"settings":{"imports":{"value":[]},"param_table":{"value":[]},"error_param_table":{"value":[]},"error_pipeline":{"expression":false,"value":null}},"instance_version":9,"error":{"81c741fa-819f-4dd8-b4e1-5a9a202fcdb6_error0":{"view_type":{"value":"document"},"label":{"value":"Ensure there is a failure to send - error0"}},"error_behavior":{"value":"none"}},"output":{}},"render_map":{"pan_x_num":0,"default_snaplex":"58c70e13050186404b38dff2","scale_ratio":1,"detail_map":{"860b8ecc-9c49-4e91-8c77-93167bf2f167":{"grid_x_int":1,"rot_int":0,"grid_y_int":3,"rot_tail_int":0},"1b91bb3e-ec3a-4138-9c34-0b8158e1ba39":{"grid_x_int":6,"error":{},"grid_y_int":3,"rot_tail_int":0,"input":{},"output":{},"rot_int":0},"619930e1-1348-47ef-958e-63c1e6db86e6":{"grid_x_int":7,"rot_int":0,"grid_y_int":3,"rot_tail_int":0},"81c741fa-819f-4dd8-b4e1-5a9a202fcdb6":{"grid_x_int":2,"output":{},"grid_y_int":3,"rot_tail_int":0,"error":{"error0":{"dx_int":0,"rot_int":0,"dy_int":-1}},"input":{},"rot_int":0},"83df914a-7a82-4134-bcf3-80f9eb6ccdbb":{"grid_x_int":4,"dy_int":4,"grid_y_int":3,"rot_tail_int":0,"dx_int":2,"rot_int":0},"755dd4a2-94d3-4c58-93ef-71c7b18eb11c":{"grid_x_int":3,"error":{},"grid_y_int":3,"rot_tail_int":0,"input":{},"output":{},"rot_int":0},"6d08ef82-fb88-4f9e-8e94-aaded37d2c0c":{"grid_x_int":5,"rot_int":0,"grid_y_int":3,"rot_tail_int":0}},"pan_y_num":0},"org_id":"58c70e0ea87b6d76b3470f3e","class_version":8,"class_id":"com-snaplogic-pipeline","instance_fqid":"f5d7ac84-b4a5-4287-b8c1-c5c06565a926_10","link_map":{"link134":{"src_view_id":"output101","dst_view_id":"input0","src_id":"6d08ef82-fb88-4f9e-8e94-aaded37d2c0c","dst_id":"1b91bb3e-ec3a-4138-9c34-0b8158e1ba39"},"link133":{"src_view_id":"output0","dst_view_id":"input101","src_id":"1b91bb3e-ec3a-4138-9c34-0b8158e1ba39","dst_id":"619930e1-1348-47ef-958e-63c1e6db86e6"},"link142":{"src_view_id":"output0","dst_view_id":"input0","src_id":"755dd4a2-94d3-4c58-93ef-71c7b18eb11c","dst_id":"83df914a-7a82-4134-bcf3-80f9eb6ccdbb"},"link143":{"src_view_id":"output0","dst_view_id":"input0","src_id":"81c741fa-819f-4dd8-b4e1-5a9a202fcdb6","dst_id":"755dd4a2-94d3-4c58-93ef-71c7b18eb11c"},"link144":{"src_view_id":"output0","dst_view_id":"input0","src_id":"83df914a-7a82-4134-bcf3-80f9eb6ccdbb","dst_id":"6d08ef82-fb88-4f9e-8e94-aaded37d2c0c"},"link145":{"src_view_id":"output0","dst_view_id":"input0","src_id":"860b8ecc-9c49-4e91-8c77-93167bf2f167","dst_id":"81c741fa-819f-4dd8-b4e1-5a9a202fcdb6"}},"original":{"partition_snode_id":"591ef091f952e90e31864074","updated_by":"tsemd@bu.edu","perms":["A","R","W","X"],"time_created":"2017-06-08T15:56:35.174000+00:00","snode_id":"593973b3e8ac6e5efd65d5d7","owner":"jskrable@bu.edu","path":"/BUDev/BUIntegration/ErrorHandling/sendErrorNotification","asset_type":"Pipeline","asset_id":"f5d7ac84-b4a5-4287-b8c1-c5c06565a926","time_updated":"2017-12-08T16:31:33.231000+00:00","name":"sendErrorNotification","parent_snode_id":"591f5f7244ecb43a73878c84","acl":[],"metadata":{},"original":{"partition_snode_id":"591ef091f952e90e31864074","updated_by":"sdelano@bu.edu","perms":["A","R","W","X"],"time_created":"2017-05-19T21:11:14.160000+00:00","snode_id":"591f5f7244ecb43a73878c84","owner":"sdelano@bu.edu","path":"/BUDev/BUIntegration/ErrorHandling","asset_type":"Dir","asset_id":null,"time_updated":"2017-05-19T21:11:14.160000+00:00","name":"ErrorHandling","parent_snode_id":"591ef091f952e90e31864074","acl":[{"perms":["R","W","X"],"subject_type":"USER","inherit":true,"subject":"sdelano@bu.edu"}],"metadata":{"pattern":false},"original":{"partition_snode_id":"5a1eba684503bf001e5a19c6","updated_by":"sdelano@bu.edu","perms":["A","R","W","X"],"time_created":"2017-05-19T13:18:09.518000+00:00","snode_id":"591ef091f952e90e31864074","owner":"ist-ipaas-di@bu.edu","path":"/BUDev/BUIntegration","asset_type":"Dir","asset_id":null,"time_updated":"2017-06-07T17:45:28.202000+00:00","name":"BUIntegration","parent_snode_id":"58c70e0ea87b6d76b3470f3e","acl":[{"perms":["R","W","X"],"subject_type":"USER","inherit":true,"subject":"sdelano@bu.edu"},{"perms":["R","W","X"],"subject_type":"USER","inherit":true,"subject":"ist-ipaas-di@bu.edu"}],"metadata":{}}}}}