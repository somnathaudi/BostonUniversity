{"link_serial":152,"update_time":"2017-12-01T19:24:59.685000+00:00","phase_snode_id":null,"scrub_version":"48f99abcdf450e7c49a04015355fb699f785e8cbf8288d894686a64c6caeddd1","instance_id":"b3dbb48c-a477-489c-8e48-9871f982bae0","update_user_id":"minhan@bu.edu","class_fqid":"com-snaplogic-pipeline_8","partition_snode_id":"58c70e0fa87b6d76b3470f45","class_version":8,"snode_id":"5a202f824f619d06fad7d6c0","snap_map":{"cd691985-06fa-460d-8776-faa71442f7d8":{"instance_id":"cd691985-06fa-460d-8776-faa71442f7d8","class_id":"com-snaplogic-snaps-email-emailsender","class_build_tag":"snapsmrc405","class_fqid":"com-snaplogic-snaps-email-emailsender_2-snapsmrc405","instance_version":10,"property_map":{"info":{"notes":{"value":null},"label":{"value":"Send email alert"}},"view_serial":101,"account":{"account_ref":{"expression":false,"value":{"label":{"expression":false,"value":"Email Notification Account"},"ref_class_id":{"value":"com-snaplogic-snaps-email-smtpaccount"},"ref_id":{"expression":false,"value":"e3d3607a-7a75-46d1-9353-5eb60c19ceeb"}}}},"settings":{"body":{"expression":false,"value":"<!DOCTYPE html> \n<html> \n<head> \n<title>Email Snap HTML Table</title> \n<style type=\"text/css\"> table.Snap {background-color:transparent;border-collapse:collapse;width:100%;} table.Snap th, table.Snap td {text-align:center;border:1px solid black;padding:5px;} table.Snap th {background-color:AntiqueWhite;} </style> \n</head> \n<body> \n<p>Below is a summary of the failed snap(s)\n\n</p> \n<table class=\"Snap\"> </table> \n<p></p> \n<p>\nPlease log onto the  snapLogic Dashboard for further information</p> \n</body> \n</html>"},"retries":{"value":3},"from":{"expression":false,"value":"monitoring@snaplogic.budev.com"},"attachments":{"value":[{"url":{"expression":false,"value":null}}]},"cc":{"expression":false,"value":null},"emailType":{"value":"HTML table"},"batchSize":{"value":100},"executable_during_suggest":{"value":true},"bcc":{"expression":false,"value":null},"to":{"expression":true,"value":"pipe.user"},"tableDataPath":{"value":"$"},"passThrough":{"value":false},"subject":{"expression":true,"value":"'ERROR - Pipeline failure on ' + $runtime_label"}},"error":{"error0":{"label":{"value":"error0"},"view_type":{"value":"document"}},"error_behavior":{"value":"fail"}},"input":{"input101":{"view_type":{"value":"document"},"label":{"value":"input0"}}}},"class_version":2,"instance_fqid":"cd691985-06fa-460d-8776-faa71442f7d8_10"},"d9c11608-5a7c-4487-9795-1b2b2d899b97":{"instance_version":4,"class_id":"com-snaplogic-snaps-transform-datatransform","class_build_tag":"snapsmrc405","class_fqid":"com-snaplogic-snaps-transform-datatransform_4-snapsmrc405","instance_id":"d9c11608-5a7c-4487-9795-1b2b2d899b97","property_map":{"info":{"notes":{"value":null},"label":{"value":"Map Log Data to Document Disposition Columns"}},"view_serial":100,"input":{"input0":{"label":{"value":"input0"},"view_type":{"value":"document"}}},"settings":{"nullSafeAccess":{"value":true},"passThrough":{"value":false},"transformations":{"value":{"mappingTable":{"value":[{"targetPath":{"value":"$create_time"},"expression":{"expression":true,"value":"$original.create_time"}},{"targetPath":{"value":"$documents"},"expression":{"expression":true,"value":"$original.documents"}},{"targetPath":{"value":"$id"},"expression":{"expression":true,"value":"$original.id"}},{"targetPath":{"value":"$label"},"expression":{"expression":true,"value":"$original.label"}},{"targetPath":{"value":"$pipe_id"},"expression":{"expression":true,"value":"$original.pipe_id"}},{"targetPath":{"value":"$runtime_label"},"expression":{"expression":true,"value":"$original.runtime_label"}},{"targetPath":{"value":"$error_msg"},"expression":{"expression":true,"value":"jsonPath($, \"$entity.response_map.entries[*]._source.msg\").shift()"}},{"targetPath":{"value":"$invoker"},"expression":{"expression":true,"value":"$original.invoker"}}]},"mappingRoot":{"value":"$"}}}},"error":{"error0":{"label":{"value":"error0"},"view_type":{"value":"document"}},"error_behavior":{"value":"fail"}},"output":{"output0":{"label":{"value":"output0"},"view_type":{"value":"document"}}}},"class_version":4,"instance_fqid":"d9c11608-5a7c-4487-9795-1b2b2d899b97_4"},"4f3e8009-bc52-4f70-9862-43f341454cd0":{"instance_id":"4f3e8009-bc52-4f70-9862-43f341454cd0","class_id":"com-snaplogic-snaps-flow-datavalidator","class_build_tag":"snapsmrc405","class_fqid":"com-snaplogic-snaps-flow-datavalidator_1-snapsmrc405","instance_version":1,"property_map":{"info":{"notes":{"value":null},"label":{"value":"Ensure there is a failure to send"}},"view_serial":100,"input":{"input0":{"view_type":{"value":"document"},"label":{"value":"input0"}}},"settings":{"constraintMappings":{"value":[{"sourcePath":{"value":"$entity.response_map.total"},"constraintValue":{"value":"1"},"constraint":{"value":"Minimum"}}]}},"error":{"error0":{"view_type":{"value":"document"},"label":{"value":"error0"}},"error_behavior":{"value":"continue"}},"output":{"output0":{"view_type":{"value":"document"},"label":{"value":"output0"}}}},"class_version":1,"instance_fqid":"4f3e8009-bc52-4f70-9862-43f341454cd0_1"},"6b809daf-896b-4eee-bffd-9177adb65fab":{"instance_id":"6b809daf-896b-4eee-bffd-9177adb65fab","class_id":"com-snaplogic-snaps-flow-head","class_build_tag":"snapsmrc465","class_fqid":"com-snaplogic-snaps-flow-head_1-snapsmrc465","instance_version":3,"property_map":{"info":{"notes":{"value":null},"label":{"value":"Head"}},"view_serial":100,"input":{"input0":{"view_type":{"value":"document"},"label":{"value":"input0"}}},"settings":{"numberOfDocs":{"value":5},"offset":{"value":0}},"error":{"error0":{"view_type":{"value":"document"},"label":{"value":"error0"}},"error_behavior":{"value":"fail"}},"output":{"output0":{"view_type":{"value":"document"},"label":{"value":"output0"}}}},"class_version":1,"instance_fqid":"6b809daf-896b-4eee-bffd-9177adb65fab_3"},"88b5bfa9-c2bb-4f94-a9ed-2877961e64cb":{"instance_version":1,"class_id":"com-snaplogic-snaps-rest-get","class_build_tag":"snapsmrc405","class_fqid":"com-snaplogic-snaps-rest-get_2-snapsmrc405","instance_id":"88b5bfa9-c2bb-4f94-a9ed-2877961e64cb","property_map":{"info":{"notes":{"value":null},"label":{"value":"REST GET Monitoring Data from Last Hour"}},"view_serial":100,"account":{"account_ref":{"expression":false,"value":{"label":{"expression":false,"value":"Snap API Rest Authorization"},"ref_class_id":{"value":"com-snaplogic-snaps-rest-restbasicauthaccount"},"ref_id":{"expression":false,"value":"74356691-21b6-4899-aaa8-095072cf97ff"}}}},"settings":{"retryInterval":{"value":3},"trustAllCerts":{"value":true},"retry":{"value":5},"hasNext":{"expression":true,"value":"($entity.response_map.offset + $entity.response_map.limit) <  $entity.response_map.total"},"timeout":{"value":900},"processArray":{"value":false},"nextUrl":{"expression":true,"value":"'https://elastic.snaplogic.com/api/1/rest/public/runtime/' + pipe.projectPath.substring(1,pipe.projectPath.indexOf('/',1)) + '?last_hours=10&state=Failed&offset=' + ($entity.response_map.offset+$entity.response_map.limit)"},"showAllHeaders":{"value":false},"paginationInterval":{"value":0},"executeDuringPreview":{"value":true},"header":{"value":[]},"responseEntityType":{"value":"DEFAULT"},"followRedirects":{"value":true},"serviceUrl":{"expression":true,"value":"'https://elastic.snaplogic.com/api/1/rest/public/runtime/' + pipe.projectPath.substring(1,pipe.projectPath.indexOf('/',1))"},"queryParams":{"value":[{"queryParamValue":{"expression":true,"value":"'Failed'"},"queryParam":{"value":"state"}},{"queryParamValue":{"expression":true,"value":"10"},"queryParam":{"value":"last_hours"}}]},"rawData":{"value":false}},"error":{"error0":{"view_type":{"value":"document"},"label":{"value":"error0"}},"error_behavior":{"value":"fail"}},"output":{"output0":{"view_type":{"value":"document"},"label":{"value":"output0"}}}},"class_version":2,"instance_fqid":"88b5bfa9-c2bb-4f94-a9ed-2877961e64cb_1"},"f0f3d303-178f-4c53-9dc7-14c48ab0a449":{"instance_version":1,"class_id":"com-snaplogic-snaps-transform-jsonsplitter","class_build_tag":"snapsmrc405","class_fqid":"com-snaplogic-snaps-transform-jsonsplitter_1-snapsmrc405","instance_id":"f0f3d303-178f-4c53-9dc7-14c48ab0a449","property_map":{"info":{"notes":{"value":null},"label":{"value":"JSON Filter Extraneous Data"}},"view_serial":100,"input":{"input0":{"view_type":{"value":"document"},"label":{"value":"input0"}}},"settings":{"nullSafeAccess":{"value":false},"includeParents":{"value":false},"includePaths":{"value":[]},"path":{"value":"$entity.response_map.entries"}},"error":{"error0":{"view_type":{"value":"document"},"label":{"value":"error0"}},"error_behavior":{"value":"fail"}},"output":{"output0":{"view_type":{"value":"document"},"label":{"value":"output0"}}}},"class_version":1,"instance_fqid":"f0f3d303-178f-4c53-9dc7-14c48ab0a449_1"},"83eaa148-0f1e-442a-8cf4-9918262ace22":{"instance_id":"83eaa148-0f1e-442a-8cf4-9918262ace22","class_id":"com-snaplogic-snaps-flow-filter","class_build_tag":"snapsmrc405","class_fqid":"com-snaplogic-snaps-flow-filter_2-snapsmrc405","instance_version":5,"property_map":{"info":{"notes":{"value":null},"label":{"value":"Filter out records older than 5 minutes"}},"view_serial":100,"input":{"input0":{"label":{"value":"input0"},"view_type":{"value":"document"}}},"settings":{"filterExpression":{"expression":true,"value":"Date.now() - Date.parse($create_time) <= (1000 * 60 * 10)"}},"error":{"error0":{"label":{"value":"error0"},"view_type":{"value":"document"}},"error_behavior":{"value":"fail"}},"output":{"output0":{"label":{"value":"output0"},"view_type":{"value":"document"}}}},"class_version":2,"instance_fqid":"83eaa148-0f1e-442a-8cf4-9918262ace22_5"},"e8b76e56-fd10-4985-8b23-db2bf8ba4c1b":{"instance_version":1,"class_id":"com-snaplogic-snaps-rest-get","class_build_tag":"snapsmrc405","class_fqid":"com-snaplogic-snaps-rest-get_2-snapsmrc405","instance_id":"e8b76e56-fd10-4985-8b23-db2bf8ba4c1b","property_map":{"info":{"notes":{"value":null},"label":{"value":"REST GET Log Data"}},"view_serial":101,"account":{"account_ref":{"expression":false,"value":{"ref_id":{"expression":false,"value":"74356691-21b6-4899-aaa8-095072cf97ff"},"ref_class_id":{"value":"com-snaplogic-snaps-rest-restbasicauthaccount"},"label":{"expression":false,"value":"Snap API Rest Authorization"}}}},"input":{"input0":{"view_type":{"value":"document"},"label":{"value":"input0"}}},"settings":{"retryInterval":{"value":3},"trustAllCerts":{"value":false},"retry":{"value":5},"hasNext":{"expression":true,"value":null},"timeout":{"value":900},"processArray":{"value":false},"nextUrl":{"expression":true,"value":null},"showAllHeaders":{"value":false},"paginationInterval":{"value":0},"executeDuringPreview":{"value":true},"header":{"value":[]},"responseEntityType":{"value":"DEFAULT"},"followRedirects":{"value":true},"serviceUrl":{"expression":true,"value":"'https://elastic.snaplogic.com/api/1/rest/public/log/' + pipe.projectPath.substring(1,pipe.projectPath.indexOf('/',1)) + '?'"},"queryParams":{"value":[{"queryParamValue":{"expression":true,"value":"$id"},"queryParam":{"value":"ruuid"}},{"queryParamValue":{"expression":true,"value":"'Error'"},"queryParam":{"value":"log_level"}}]},"rawData":{"value":false}},"error":{"error0":{"view_type":{"value":"document"},"label":{"value":"error0"}},"error_behavior":{"value":"fail"}},"output":{"output101":{"label":{"value":"output0"},"view_type":{"value":"document"}}}},"class_version":2,"instance_fqid":"e8b76e56-fd10-4985-8b23-db2bf8ba4c1b_1"}},"org_snode_id":"58c70e0ea87b6d76b3470f3e","path":"/BUDev/projects/ErrorHandling_Logan/Error_Monitoring_and_Notification","instance_version":23,"migrate_version":"master-2517","scrub_backup":[],"create_user_id":"minhan@bu.edu","project_snode_id":"5a202f7bbc9ffa06cb6597de","property_map":{"info":{"notes":{"value":null},"author":{"value":"minhan@bu.edu"},"purpose":{"value":null},"pipeline_doc_uri":{"value":null},"label":{"value":"Error_Monitoring_and_Notification"}},"input":{},"settings":{"param_table":{"value":[]},"imports":{"value":[]}},"instance_version":22,"error":{"error_behavior":{"value":"none"},"4f3e8009-bc52-4f70-9862-43f341454cd0_error0":{"label":{"value":"Ensure there is a failure to send - error0"},"view_type":{"value":"document"}}},"output":{}},"render_map":{"pan_x_num":0,"default_snaplex":"58c70e13050186404b38dff2","scale_ratio":1,"detail_map":{"cd691985-06fa-460d-8776-faa71442f7d8":{"grid_x_int":9,"rot_int":0,"grid_y_int":3,"rot_tail_int":0},"d9c11608-5a7c-4487-9795-1b2b2d899b97":{"grid_x_int":8,"rot_int":0,"grid_y_int":3,"rot_tail_int":0},"4f3e8009-bc52-4f70-9862-43f341454cd0":{"grid_x_int":3,"output":{},"grid_y_int":3,"rot_tail_int":0,"error":{"error0":{"dx_int":0,"rot_int":0,"dy_int":-1}},"input":{},"rot_int":0},"6b809daf-896b-4eee-bffd-9177adb65fab":{"grid_x_int":6,"rot_int":0,"grid_y_int":3,"rot_tail_int":0},"88b5bfa9-c2bb-4f94-a9ed-2877961e64cb":{"grid_x_int":2,"error":{},"grid_y_int":3,"rot_tail_int":0,"input":{},"output":{},"rot_int":0},"f0f3d303-178f-4c53-9dc7-14c48ab0a449":{"grid_x_int":4,"error":{},"grid_y_int":3,"rot_tail_int":0,"input":{},"output":{},"rot_int":0},"83eaa148-0f1e-442a-8cf4-9918262ace22":{"grid_x_int":5,"dy_int":4,"grid_y_int":3,"rot_tail_int":0,"dx_int":2,"rot_int":0},"e8b76e56-fd10-4985-8b23-db2bf8ba4c1b":{"grid_x_int":7,"error":{},"grid_y_int":3,"rot_tail_int":0,"input":{},"output":{},"rot_int":0}},"pan_y_num":0},"org_id":"58c70e0ea87b6d76b3470f3e","path_id":"/BUDev/projects/ErrorHandling_Logan","class_id":"com-snaplogic-pipeline","create_time":"2017-11-30T16:19:14.379000+00:00","instance_fqid":"b3dbb48c-a477-489c-8e48-9871f982bae0_23","link_map":{"link134":{"src_view_id":"output101","dst_view_id":"input0","src_id":"e8b76e56-fd10-4985-8b23-db2bf8ba4c1b","dst_id":"d9c11608-5a7c-4487-9795-1b2b2d899b97"},"link143":{"src_view_id":"output0","dst_view_id":"input0","src_id":"4f3e8009-bc52-4f70-9862-43f341454cd0","dst_id":"f0f3d303-178f-4c53-9dc7-14c48ab0a449"},"link146":{"src_view_id":"output0","dst_view_id":"input101","src_id":"d9c11608-5a7c-4487-9795-1b2b2d899b97","dst_id":"cd691985-06fa-460d-8776-faa71442f7d8"},"link150":{"src_view_id":"output0","dst_view_id":"input0","src_id":"6b809daf-896b-4eee-bffd-9177adb65fab","dst_id":"e8b76e56-fd10-4985-8b23-db2bf8ba4c1b"},"link145":{"src_view_id":"output0","dst_view_id":"input0","src_id":"88b5bfa9-c2bb-4f94-a9ed-2877961e64cb","dst_id":"4f3e8009-bc52-4f70-9862-43f341454cd0"},"link151":{"src_view_id":"output0","dst_view_id":"input0","src_id":"83eaa148-0f1e-442a-8cf4-9918262ace22","dst_id":"6b809daf-896b-4eee-bffd-9177adb65fab"},"link149":{"src_view_id":"output0","dst_view_id":"input0","src_id":"f0f3d303-178f-4c53-9dc7-14c48ab0a449","dst_id":"83eaa148-0f1e-442a-8cf4-9918262ace22"}},"original":{"partition_snode_id":"58c70e0fa87b6d76b3470f45","updated_by":"minhan@bu.edu","perms":["A","R","W","X"],"time_created":"2017-11-30T16:19:14.411000+00:00","snode_id":"5a202f824f619d06fad7d6c0","owner":"minhan@bu.edu","path":"/BUDev/projects/ErrorHandling_Logan/Error_Monitoring_and_Notification","asset_type":"Pipeline","asset_id":"b3dbb48c-a477-489c-8e48-9871f982bae0","time_updated":"2017-12-01T19:24:59.685000+00:00","name":"Error_Monitoring_and_Notification","parent_snode_id":"5a202f7bbc9ffa06cb6597de","acl":[],"metadata":{},"original":{"partition_snode_id":"58c70e0fa87b6d76b3470f45","updated_by":"minhan@bu.edu","perms":["A","R","W","X"],"time_created":"2017-11-30T16:19:07.247000+00:00","snode_id":"5a202f7bbc9ffa06cb6597de","owner":"minhan@bu.edu","path":"/BUDev/projects/ErrorHandling_Logan","asset_type":"Dir","asset_id":null,"time_updated":"2017-11-30T16:20:07.985000+00:00","name":"ErrorHandling_Logan","parent_snode_id":"58c70e0fa87b6d76b3470f45","acl":[{"perms":["R","W","X"],"subject_type":"USER","inherit":true,"subject":"minhan@bu.edu"}],"metadata":{"pattern":false},"original":{"partition_snode_id":"5a1eba684503bf001e5a19c6","updated_by":"sdelano@bu.edu","perms":["A","R","W","X"],"time_created":"2017-03-13T21:24:31.092000+00:00","snode_id":"58c70e0fa87b6d76b3470f45","owner":"sdelano1@comcast.net","path":"/BUDev/projects","asset_type":"Dir","asset_id":null,"time_updated":"2017-11-03T14:40:52.927000+00:00","name":"projects","parent_snode_id":"58c70e0ea87b6d76b3470f3e","acl":[{"perms":["R","W","X"],"subject_type":"USER","inherit":true,"subject":"admin@snaplogic.com"},{"perms":["R"],"subject_type":"GROUP","inherit":false,"subject":"members"},{"perms":["R"],"subject_type":"USER","inherit":false,"subject":"mvyravan@bu.edu"},{"perms":["R","W","X"],"subject_type":"USER","inherit":true,"subject":"sdelano1@comcast.net"},{"perms":["R","X","W"],"subject_type":"GROUP","inherit":false,"subject":"Developers"}],"metadata":{}}}}}