{"link_serial":143,"update_time":"2017-12-12T16:01:28.578000+00:00","phase_snode_id":null,"scrub_version":"48f99abcdf450e7c49a04015355fb699f785e8cbf8288d894686a64c6caeddd1","instance_id":"cac875eb-a365-42e1-9598-4684072542d8","update_user_id":"jskrable@bu.edu","class_fqid":"com-snaplogic-pipeline_8","partition_snode_id":"5a1eba3a2cf68b001f6bda34","class_version":8,"snode_id":"5a2abad5bf2a21001d7274fa","snap_map":{"ef44b65a-c771-4440-b4b6-d48e8d22e6bc":{"instance_version":1,"class_id":"com-snaplogic-snaps-flow-union","class_build_tag":"snapsmrc465","class_fqid":"com-snaplogic-snaps-flow-union_2-snapsmrc465","instance_id":"ef44b65a-c771-4440-b4b6-d48e8d22e6bc","property_map":{"info":{"notes":{"value":"Merges success and error paths into one stream"},"label":{"value":"unionStreams"}},"view_serial":100,"input":{"input0":{"label":{"value":"input0"},"view_type":{"value":"document"}},"input1":{"label":{"value":"input1"},"view_type":{"value":"document"}}},"settings":{},"error":{"error0":{"label":{"value":"error0"},"view_type":{"value":"document"}},"error_behavior":{"value":"fail"}},"output":{"output0":{"label":{"value":"output0"},"view_type":{"value":"document"}}}},"class_version":2,"instance_fqid":"ef44b65a-c771-4440-b4b6-d48e8d22e6bc_1"},"65a32227-ce10-446d-9d36-e0fbd0916d6c":{"instance_version":1,"class_id":"com-snaplogic-snaps-rest-get","class_build_tag":"snapsmrc414","class_fqid":"com-snaplogic-snaps-rest-get_2-snapsmrc414","instance_id":"65a32227-ce10-446d-9d36-e0fbd0916d6c","property_map":{"info":{"notes":{"value":"Performs a REST Get to the BioRAFT API service. Appended to the URL are both the request time (unix timestamp format) and the query string passed from the SnapLogic request."},"label":{"value":"getBioRAFTRESTData"}},"view_serial":100,"account":{"account_ref":{"expression":false,"value":{}}},"settings":{"retryInterval":{"value":3},"trustAllCerts":{"value":true},"retry":{"value":5},"hasNext":{"expression":true,"value":null},"serviceUrl":{"expression":true,"value":"\"http://bu.bioraft.com/v1/training/records?request_time=\" + $request_time + $query"},"processArray":{"value":false},"nextUrl":{"expression":true,"value":null},"showAllHeaders":{"value":false},"paginationInterval":{"value":0},"executeDuringPreview":{"value":true},"header":{"value":[{"headerKey":{"expression":true,"value":"\"public_key\""},"headerValue":{"expression":true,"value":"$public_key"}},{"headerKey":{"expression":true,"value":"\"authentication_hash\""},"headerValue":{"expression":true,"value":"$authentication_hash"}}]},"responseEntityType":{"value":"DEFAULT"},"followRedirects":{"value":true},"timeout":{"value":900},"connTimeout":{"value":30},"queryParams":{"value":[]},"rawData":{"value":false}},"output":{"output0":{"label":{"value":"output0"},"view_type":{"value":"document"}}},"error":{"error0":{"label":{"value":"error0"},"view_type":{"value":"document"}},"error_behavior":{"value":"continue"}},"input":{"input0":{"label":{"value":"input0"},"view_type":{"value":"document"}}}},"class_version":2,"instance_fqid":"65a32227-ce10-446d-9d36-e0fbd0916d6c_1"},"cdc6090d-f3c7-4c9d-b332-ca6fb18e4e92":{"instance_id":"cdc6090d-f3c7-4c9d-b332-ca6fb18e4e92","class_id":"com-snaplogic-snaps-transform-datatransform","class_build_tag":"snapsmrc465","class_fqid":"com-snaplogic-snaps-transform-datatransform_4-snapsmrc465","instance_version":1,"property_map":{"info":{"notes":{"value":"Maps the information returned from BioRAFT API in the event of HTTP error and restructures into a response."},"label":{"value":"mapErrorData"}},"view_serial":100,"input":{"input0":{"view_type":{"value":"document"},"label":{"value":"input0"}}},"settings":{"nullSafeAccess":{"value":true},"passThrough":{"value":false},"transformations":{"value":{"mappingTable":{"value":[{"expression":{"expression":true,"value":"\"The SnapLogic request was successful, but BioRAFT's API has returned an error. Please see information below.\""},"targetPath":{"value":"$response.message"}},{"expression":{"expression":true,"value":"$statusCode"},"targetPath":{"value":"$response.statusCode"}},{"expression":{"expression":true,"value":"$error"},"targetPath":{"value":"$response.error"}},{"expression":{"expression":true,"value":"$error_entity"},"targetPath":{"value":"$response.error_entity"}},{"expression":{"expression":true,"value":"$original"},"targetPath":{"value":"$response.original"}}]},"mappingRoot":{"value":"$"}}}},"error":{"error0":{"view_type":{"value":"document"},"label":{"value":"error0"}},"error_behavior":{"value":"fail"}},"output":{"output0":{"view_type":{"value":"document"},"label":{"value":"output0"}}}},"class_version":4,"instance_fqid":"cdc6090d-f3c7-4c9d-b332-ca6fb18e4e92_1"},"93bbfd37-074a-42f2-8390-0789a915c8ed":{"instance_id":"93bbfd37-074a-42f2-8390-0789a915c8ed","class_id":"com-snaplogic-snaps-transform-jsonparser","class_build_tag":"snapsmrc465","class_fqid":"com-snaplogic-snaps-transform-jsonparser_1-snapsmrc465","instance_version":1,"property_map":{"info":{"notes":{"value":"Parses the binary data into a readable JSON file"},"label":{"value":"parseAPIKeyJSONFile"}},"view_serial":100,"input":{"input0":{"label":{"value":"input0"},"view_type":{"value":"binary"}}},"settings":{"allowNonStandardJson":{"value":true},"arrayElementsAsDocuments":{"value":true},"jsonFilterPath":{"value":null}},"error":{"error0":{"label":{"value":"error0"},"view_type":{"value":"document"}},"error_behavior":{"value":"fail"}},"output":{"output0":{"label":{"value":"output0"},"view_type":{"value":"document"}}}},"class_version":1,"instance_fqid":"93bbfd37-074a-42f2-8390-0789a915c8ed_1"},"4ea1612e-a79e-44a6-ae8f-0e87bac179cb":{"instance_id":"4ea1612e-a79e-44a6-ae8f-0e87bac179cb","class_id":"com-snaplogic-snaps-binary-simpleread","class_build_tag":"snapsmrc465","class_fqid":"com-snaplogic-snaps-binary-simpleread_1-snapsmrc465","instance_version":4,"property_map":{"info":{"notes":{"value":"Read from JSON file containing BioRAFT API request keys"},"label":{"value":"readAPIKeyJSONFile"}},"view_serial":100,"account":{"account_ref":{"expression":false,"value":{"ref_id":{"expression":false,"value":"0d98021d-436d-4e36-98ba-4031f2c082a5"},"ref_class_id":{"value":"com-snaplogic-snaps-binary-binarys3account"},"label":{"expression":false,"value":"AWS S3 Buckets prod"}}}},"settings":{"executeDuringPreview":{"value":true},"preventURLEncoding":{"value":false},"filePath":{"expression":false,"value":"s3:///buistintegration/Authentication Data/bio_raft_keys.json"}},"error":{"error0":{"view_type":{"value":"document"},"label":{"value":"error0"}},"error_behavior":{"value":"fail"}},"output":{"output0":{"view_type":{"value":"binary"},"label":{"value":"output0"}}}},"class_version":1,"instance_fqid":"4ea1612e-a79e-44a6-ae8f-0e87bac179cb_4"},"b32b40fa-76c3-4cda-a244-31f716b2c309":{"instance_version":1,"class_id":"com-snaplogic-snaps-transform-structuraltransform","class_build_tag":"snapsmrc414","class_fqid":"com-snaplogic-snaps-transform-structuraltransform_1-snapsmrc414","instance_id":"b32b40fa-76c3-4cda-a244-31f716b2c309","property_map":{"info":{"notes":{"value":"Restructures the data received from BioRAFT, the HTTP status, and the original request into a response object."},"label":{"value":"restructureResponse"}},"view_serial":100,"input":{"input0":{"view_type":{"value":"document"},"label":{"value":"input0"}}},"settings":{"nullSafeAccess":{"value":false},"passThrough":{"value":"None - new map"},"mappingTable":{"value":[{"sourcePath":{"value":"$entity.content"},"operation":{"value":"move"},"targetPath":{"value":"$response.content"}},{"sourcePath":{"value":"$original"},"operation":{"value":"move"},"targetPath":{"value":"$response.original"}},{"sourcePath":{"value":"$statusLine"},"operation":{"value":"move"},"targetPath":{"value":"$response.statusLine"}}]}},"error":{"error0":{"view_type":{"value":"document"},"label":{"value":"error0"}},"error_behavior":{"value":"fail"}},"output":{"output0":{"view_type":{"value":"document"},"label":{"value":"output0"}}}},"class_version":1,"instance_fqid":"b32b40fa-76c3-4cda-a244-31f716b2c309_1"},"efbfbbb7-ccbd-4708-908c-4b09562457a4":{"instance_version":3,"class_id":"com-snaplogic-snaps-transform-datatransform","class_build_tag":"snapsmrc414","class_fqid":"com-snaplogic-snaps-transform-datatransform_4-snapsmrc414","instance_id":"efbfbbb7-ccbd-4708-908c-4b09562457a4","property_map":{"info":{"notes":{"value":"Creates the authentication hash required for the REST call.\n\nIt also parses the query string from the request and prepares it for the BioRAFT call."},"label":{"value":"mapRequestRequirements"}},"view_serial":103,"input":{"input103":{"view_type":{"value":"document"},"label":{"value":"input0"}}},"settings":{"nullSafeAccess":{"value":false},"passThrough":{"value":false},"transformations":{"value":{"mappingTable":{"value":[{"expression":{"expression":true,"value":"Date.now().getTime().toString().substr(0,10)"},"targetPath":{"value":"$request_time"}},{"expression":{"expression":true,"value":"Digest.sha256($PIN+$public_key+$private_key+Date.now().getTime().toString().substr(0,10))"},"targetPath":{"value":"$authentication_hash"}},{"expression":{"expression":true,"value":"(_QUERY_STRING == null || _QUERY_STRING == \"\" ? _QUERY_STRING : \"&\" + decodeURIComponent(_QUERY_STRING))"},"targetPath":{"value":"$query"}},{"expression":{"expression":true,"value":"$public_key"},"targetPath":{"value":"$public_key"}}]},"mappingRoot":{"value":"$"}}}},"error":{"error0":{"view_type":{"value":"document"},"label":{"value":"error0"}},"error_behavior":{"value":"fail"}},"output":{"output0":{"view_type":{"value":"document"},"label":{"value":"output0"}}}},"class_version":4,"instance_fqid":"efbfbbb7-ccbd-4708-908c-4b09562457a4_3"}},"org_snode_id":"58c70e0ea87b6d76b3470f3e","path":"/BUDev/Admin-Research-Systems/getBioRAFTComplianceTrainingData/handleBioRAFT","instance_version":9,"migrate_version":"master-2517","scrub_backup":[],"create_user_id":"jskrable@bu.edu","project_snode_id":"5a1ecd69f952e905e16f9836","property_map":{"info":{"notes":{"value":null},"label":{"value":"handleBioRAFT"},"purpose":{"value":null},"pipeline_doc_uri":{"value":null},"author":{"value":"jskrable@bu.edu"}},"input":{},"settings":{"imports":{"value":[]},"error_param_table":{"value":[{"value":{"expression":true,"value":"pipe.label"},"key":{"value":"pipeline_label"}},{"value":{"expression":true,"value":"pipe.user"},"key":{"value":"running_user"}},{"value":{"expression":true,"value":"pipe.startTime.toLocaleDateTimeString()"},"key":{"value":"start_time"}},{"value":{"expression":true,"value":"pipe.ruuid"},"key":{"value":"pipe_run_id"}},{"value":{"expression":true,"value":"pipe.plexPath.substring(pipe.plexPath.lastIndexOf('/')+1)"},"key":{"value":"snapplex"}},{"value":{"expression":true,"value":"'jskrable@bu.edu'"},"key":{"value":"notify"}}]},"param_table":{"value":[{"capture":{"value":true},"value":{"value":null},"key":{"value":"user_id"}},{"capture":{"value":true},"value":{"value":null},"key":{"value":"course_ids[]"}},{"capture":{"value":true},"value":{"value":null},"key":{"value":"active_records"}},{"capture":{"value":true},"value":{"value":null},"key":{"value":"external_user_id"}},{"capture":{"value":true},"value":{"value":null},"key":{"value":"group_id"}},{"capture":{"value":true},"value":{"value":null},"key":{"value":"start_date"}},{"capture":{"value":true},"value":{"value":null},"key":{"value":"end_date"}},{"capture":{"value":true},"value":{"value":null},"key":{"value":"university_id"}},{"capture":{"value":true},"value":{"value":null},"key":{"value":"HTTP_ACCEPT"}},{"capture":{"value":true},"value":{"value":null},"key":{"value":"REMOTE_USER"}},{"capture":{"value":true},"value":{"value":null},"key":{"value":"HTTP_REFERER"}},{"capture":{"value":true},"value":{"value":null},"key":{"value":"REMOTE_ADDR"}},{"capture":{"value":true},"value":{"value":null},"key":{"value":"HTTP_ACCEPT_ENCODING"}},{"capture":{"value":true},"value":{"value":null},"key":{"value":"REQUEST_METHOD"}},{"capture":{"value":true},"value":{"value":null},"key":{"value":"HTTP_DATE"}},{"capture":{"value":true},"value":{"value":null},"key":{"value":"HTTP_USER_AGENT"}},{"capture":{"value":true},"value":{"value":null},"key":{"value":"PATH_INFO"}},{"capture":{"value":true},"value":{"value":null},"key":{"value":"CONTENT_TYPE"}},{"capture":{"value":true},"value":{"value":null},"key":{"value":"REMOTE_PORT"}},{"capture":{"value":true},"value":{"value":null},"key":{"value":"QUERY_STRING"}}]},"error_pipeline":{"expression":false,"value":"../../shared/ErrorHandler"}},"instance_version":8,"error":{"error_behavior":{"value":"none"}},"output":{"ef44b65a-c771-4440-b4b6-d48e8d22e6bc_output0":{"view_type":{"value":"document"},"label":{"value":"unionStreams - output0"}}}},"render_map":{"pan_x_num":0,"default_snaplex":"58c70e13050186404b38dff2","scale_ratio":1,"detail_map":{"ef44b65a-c771-4440-b4b6-d48e8d22e6bc":{"grid_x_int":6,"error":{},"grid_y_int":2,"rot_tail_int":0,"input":{"input1":{"dx_int":0,"rot_int":0,"dy_int":1}},"output":{},"rot_int":0},"65a32227-ce10-446d-9d36-e0fbd0916d6c":{"grid_x_int":4,"output":{},"grid_y_int":3,"rot_tail_int":0,"error":{"error0":{"dx_int":0,"rot_int":0,"dy_int":-1}},"input":{},"rot_int":0},"cdc6090d-f3c7-4c9d-b332-ca6fb18e4e92":{"grid_x_int":5,"error":{},"grid_y_int":2,"rot_tail_int":0,"input":{},"output":{},"rot_int":0},"93bbfd37-074a-42f2-8390-0789a915c8ed":{"grid_x_int":2,"error":{},"grid_y_int":3,"rot_tail_int":0,"input":{},"output":{},"rot_int":0},"4ea1612e-a79e-44a6-ae8f-0e87bac179cb":{"grid_x_int":1,"rot_int":0,"grid_y_int":3,"rot_tail_int":0},"b32b40fa-76c3-4cda-a244-31f716b2c309":{"grid_x_int":5,"error":{},"grid_y_int":3,"rot_tail_int":0,"input":{},"output":{},"rot_int":0},"efbfbbb7-ccbd-4708-908c-4b09562457a4":{"grid_x_int":3,"rot_int":0,"grid_y_int":3,"rot_tail_int":0}},"pan_y_num":0},"org_id":"58c70e0ea87b6d76b3470f3e","path_id":"/BUDev/Admin-Research-Systems/getBioRAFTComplianceTrainingData","class_id":"com-snaplogic-pipeline","create_time":"2017-12-08T16:16:21.159000+00:00","instance_fqid":"cac875eb-a365-42e1-9598-4684072542d8_9","link_map":{"link137":{"src_view_id":"output0","dst_view_id":"input0","src_id":"efbfbbb7-ccbd-4708-908c-4b09562457a4","dst_id":"65a32227-ce10-446d-9d36-e0fbd0916d6c"},"link136":{"src_view_id":"output0","dst_view_id":"input0","src_id":"65a32227-ce10-446d-9d36-e0fbd0916d6c","dst_id":"b32b40fa-76c3-4cda-a244-31f716b2c309"},"link139":{"src_view_id":"output0","dst_view_id":"input1","src_id":"b32b40fa-76c3-4cda-a244-31f716b2c309","dst_id":"ef44b65a-c771-4440-b4b6-d48e8d22e6bc"},"link138":{"src_view_id":"error0","dst_view_id":"input0","src_id":"65a32227-ce10-446d-9d36-e0fbd0916d6c","dst_id":"cdc6090d-f3c7-4c9d-b332-ca6fb18e4e92"},"link142":{"src_view_id":"output0","dst_view_id":"input0","src_id":"4ea1612e-a79e-44a6-ae8f-0e87bac179cb","dst_id":"93bbfd37-074a-42f2-8390-0789a915c8ed"},"link140":{"src_view_id":"output0","dst_view_id":"input0","src_id":"cdc6090d-f3c7-4c9d-b332-ca6fb18e4e92","dst_id":"ef44b65a-c771-4440-b4b6-d48e8d22e6bc"},"link141":{"src_view_id":"output0","dst_view_id":"input103","src_id":"93bbfd37-074a-42f2-8390-0789a915c8ed","dst_id":"efbfbbb7-ccbd-4708-908c-4b09562457a4"}},"original":{"partition_snode_id":"5a1eba3a2cf68b001f6bda34","updated_by":"jskrable@bu.edu","perms":["A","R","W","X"],"time_created":"2017-12-08T16:16:21.304000+00:00","snode_id":"5a2abad5bf2a21001d7274fa","owner":"jskrable@bu.edu","path":"/BUDev/Admin-Research-Systems/getBioRAFTComplianceTrainingData/handleBioRAFT","asset_type":"Pipeline","asset_id":"cac875eb-a365-42e1-9598-4684072542d8","time_updated":"2017-12-12T16:01:28.578000+00:00","name":"handleBioRAFT","parent_snode_id":"5a1ecd69f952e905e16f9836","acl":[],"metadata":{},"original":{"partition_snode_id":"5a1eba3a2cf68b001f6bda34","updated_by":"jskrable@bu.edu","perms":["A","R","W","X"],"time_created":"2017-11-29T15:08:25.475000+00:00","snode_id":"5a1ecd69f952e905e16f9836","owner":"jskrable@bu.edu","path":"/BUDev/Admin-Research-Systems/getBioRAFTComplianceTrainingData","asset_type":"Dir","asset_id":null,"time_updated":"2017-12-08T16:04:04.395000+00:00","name":"getBioRAFTComplianceTrainingData","parent_snode_id":"5a1eba3a2cf68b001f6bda34","acl":[{"perms":["R","W","X"],"subject_type":"USER","inherit":true,"subject":"jskrable@bu.edu"}],"metadata":{"pattern":false},"original":{"partition_snode_id":"5a1eba684503bf001e5a19c6","updated_by":"sdelano@bu.edu","perms":["A","R","W","X"],"time_created":"2017-11-29T13:46:34.877000+00:00","snode_id":"5a1eba3a2cf68b001f6bda34","owner":"sdelano@bu.edu","path":"/BUDev/Admin-Research-Systems","asset_type":"Dir","asset_id":null,"time_updated":"2017-11-29T13:46:34.877000+00:00","name":"Admin-Research-Systems","parent_snode_id":"58c70e0ea87b6d76b3470f3e","acl":[{"perms":["R","W","X"],"subject_type":"USER","inherit":true,"subject":"sdelano@bu.edu"}],"metadata":{}}}},"original_0":{"partition_snode_id":"5a1eba3a2cf68b001f6bda34","updated_by":"jskrable@bu.edu","perms":["A","R","W","X"],"time_created":"2017-12-08T16:16:21.304000+00:00","snode_id":"5a2abad5bf2a21001d7274fa","owner":"jskrable@bu.edu","path":"/BUDev/Admin-Research-Systems/getBioRAFTComplianceTrainingData/handleBioRAFT","asset_type":"Pipeline","asset_id":"cac875eb-a365-42e1-9598-4684072542d8","time_updated":"2017-12-12T16:01:28.578000+00:00","name":"handleBioRAFT","parent_snode_id":"5a1ecd69f952e905e16f9836","acl":[],"metadata":{},"original":{"partition_snode_id":"5a1eba3a2cf68b001f6bda34","updated_by":"jskrable@bu.edu","perms":["A","R","W","X"],"time_created":"2017-11-29T15:08:25.475000+00:00","snode_id":"5a1ecd69f952e905e16f9836","owner":"jskrable@bu.edu","path":"/BUDev/Admin-Research-Systems/getBioRAFTComplianceTrainingData","asset_type":"Dir","asset_id":null,"time_updated":"2017-12-08T16:04:04.395000+00:00","name":"getBioRAFTComplianceTrainingData","parent_snode_id":"5a1eba3a2cf68b001f6bda34","acl":[{"perms":["R","W","X"],"subject_type":"USER","inherit":true,"subject":"jskrable@bu.edu"}],"metadata":{"pattern":false},"original":{"partition_snode_id":"5a1eba684503bf001e5a19c6","updated_by":"sdelano@bu.edu","perms":["A","R","W","X"],"time_created":"2017-11-29T13:46:34.877000+00:00","snode_id":"5a1eba3a2cf68b001f6bda34","owner":"sdelano@bu.edu","path":"/BUDev/Admin-Research-Systems","asset_type":"Dir","asset_id":null,"time_updated":"2017-11-29T13:46:34.877000+00:00","name":"Admin-Research-Systems","parent_snode_id":"58c70e0ea87b6d76b3470f3e","acl":[{"perms":["R","W","X"],"subject_type":"USER","inherit":true,"subject":"sdelano@bu.edu"}],"metadata":{}}}}}